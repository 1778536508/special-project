<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="screen-orientation" content="portrait"><!-- uc强制竖屏 -->
    <meta name="x5-orientation" content="portrait"><!-- QQ强制竖屏 -->
    <meta name="msapplication-tap-highlight" content="no">
    <link rel="stylesheet" href="css/dedault.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="js/flexible.js"></script>
    <script src="js/loads.js"></script>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/delighters.js"></script>
    <title>从《诗经》到《红楼梦》—那些年我们读过的经典</title>
</head>
<body>
<!--横屏提示-->
<div class="row-tishi">
    <img src="./image/hengtisz.gif" alt="">
    <p>请将手机锁屏后横屏观看</p>
    <b></b>
</div>
<!--loading-->
<div class="loading-box">
    <img src="./image/huaban-2.jpg" alt="">
    <i><img src="./image/loading.gif" alt=""></i>
    <b id="loadingNum">0%</b>
</div>
<div class="total-box" id="total-box">
    <div class="content-box">
        <ul class="content-box-pics">
            <li>
                <div>
                    <img src="./image/backgrounds/21.jpg" alt="">
                </div>
            </li>
            <li>
                <div>
                    <img src="./image/backgrounds/20.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a13">
                    <i data-video="http://stream.nlc.cn/issue/zhuanti/hongloumeng/2015MOOC0409_01.mp4"><img src="./image/backgroundz/15.png" alt=""></i>
                    <a><img src="./image/backgroundz/1.15.png" alt=""></a>
                </div>
            </li>
            <li>
                <div>
                    <img src="./image/backgrounds/19.jpg" alt="">
                </div>
            </li>
            <li>
                <div>
                    <img src="./image/backgrounds/18.jpg" alt="">
                </div>
            </li>
            <li data-delighter>
                <div>
                    <img src="./image/backgrounds/17.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a12">
                    <i data-video="http://stream.nlc.cn/issue/zhuanti/hongloumeng/2015MOOC1125.mp4"><img src="./image/backgroundz/14.png" alt=""></i>
                    <b data-delighter><img src="./image/backgroundz/2-10.png" alt=""></b>
                    <a><img src="./image/backgroundz/1.14.png" alt=""></a>
                </div>
            </li>
            <li>
                <div>
                    <img src="./image/backgrounds/16.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a11">
                    <i data-video="http://stream.nlc.cn/issue/zhuanti/hongloumeng/2018MOOC0162_01.mp4"><img src="./image/backgroundz/13.png" alt=""></i>
                    <b data-delighter><img src="./image/backgroundz/2-9.png" alt=""></b>
                    <a><img src="./image/backgroundz/1.13.png" alt=""></a>
                </div>
            </li>
            <li>
                <div>
                    <img src="./image/backgrounds/15.jpg" alt="">
                </div>
            </li>
            <li>
                <div>
                    <img src="./image/backgrounds/14.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a10">
                    <i data-video="http://stream.nlc.cn/issue/zhuanti/hongloumeng/2015MOOC0165_01.mp4"><img src="./image/backgroundz/12.png" alt=""></i>
                    <a><img src="./image/backgroundz/1.12.png" alt=""></a>
                </div>
            </li>
            <li>
                <div>
                    <img src="./image/backgrounds/13.jpg" alt="">
                </div>
            </li>
            <li data-delighter>
                <div>
                    <img src="./image/backgrounds/12.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a9">
                    <b data-delighter><img src="./image/backgroundz/2-8.png" alt=""></b>
                </div>
            </li>
            <li>
                <div>
                    <img src="./image/backgrounds/11.jpg" alt="">
                </div>
            </li>
            <li data-delighter>
                <div>
                    <img src="./image/backgrounds/10.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a8">
                    <b data-delighter><img src="./image/backgroundz/2-7.png" alt=""></b>
                </div>
            </li>
            <li>
                <div>
                    <img src="./image/backgrounds/9.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a7">
                    <i data-video="http://stream.nlc.cn/issue/zhuanti/hongloumeng/2015MOOC0057_01.mp4"><img src="./image/backgroundz/10.png" alt=""></i>
                    <a><img src="./image/backgroundz/1.10.png" alt=""></a>
                </div>
            </li>
            <li data-delighter>
                <div>
                    <img src="./image/backgrounds/8.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a6">
                    <i data-video="http://stream.nlc.cn/issue/zhuanti/hongloumeng/2015MOOC0088_01.mp4"><img src="./image/backgroundz/9.png" alt=""></i>
                    <b data-delighter><img src="./image/backgroundz/2-6.png" alt=""></b>
                    <a><img src="./image/backgroundz/1.9.png" alt=""></a>
                </div>
            </li>
            <li data-delighter>
                <div>
                    <img src="./image/backgrounds/7.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a5">
                    <b data-delighter><img src="./image/backgroundz/2-5.png" alt=""></b>
                </div>
            </li>
            <li data-delighter>
                <div>
                    <img src="./image/backgrounds/6.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a4">
                    <i data-video="http://stream.nlc.cn/issue/zhuanti/hongloumeng/2015MOOC1073_01.mp4"><img src="./image/backgroundz/7.png" alt=""></i>
                    <b data-delighter><img src="./image/backgroundz/2-4.png" alt=""></b>
                    <a><img src="./image/backgroundz/1.7.png" alt=""></a>
                </div>
            </li>
            <li data-delighter>
                <div>
                    <img src="./image/backgrounds/5.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a3">
                    <b data-delighter><img src="./image/backgroundz/2-3.png" alt=""></b>
                </div>
            </li>
            <li>
                <div>
                    <img src="./image/backgrounds/4.jpg" alt="">
                </div>
            </li>
            <li data-delighter>
                <div>
                    <img src="./image/backgrounds/3.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a2">
                    <i data-video="http://stream.nlc.cn/issue/zhuanti/hongloumeng/2015MOOC0661_01.mp4"><img src="./image/backgroundz/5.png" alt=""></i>
                    <b><img src="./image/backgroundz/2-2.png" alt=""></b>
                    <a><img src="./image/backgroundz/1.5.png" alt=""></a>
                </div>
            </li>
            <li data-delighter>
                <div>
                    <img src="./image/backgrounds/2.jpg" alt="">
                </div>
                <div class="content-box-pics-item-box a1">
                    <i data-video="http://stream.nlc.cn/issue/zhuanti/hongloumeng/2017MOOC9990_02.mp4"><img src="./image/backgroundz/1.png" alt=""></i>
                    <b><img src="./image/backgroundz/2-1.png" alt=""></b>
                    <a><img src="./image/backgroundz/1.1.png" alt=""></a>
                </div>
            </li>
        </ul>
    </div>
    <div class="home-box">
        <div class="juan-box">
            <div class="juan-text-brother" data-delighter></div>
            <div class="juan-zhanwei">
                <div class="juan-text">
                    <div class="juan-text-box">
                        <i id="juan-left"></i>
                        <div class="home-img-box">
                            <img src="./image/b-j.jpg" alt="">
                        </div>
                        <i></i>
                    </div>
                </div>
            </div>

            <div class="juan-back">
                <img src="./image/b-1.jpg" alt="">
            </div>
        </div>
        <div class="text-box">
            <i><img src="./image/scroll.png" alt=""></i>
            <i><img src="./image/title.png" alt=""></i>
            <div><img src="./image/b-d.png" alt=""></div>
        </div>
    </div>
<!--    视频-->
    <div class="video-box">

    </div>
<!--    音频-->
    <div class="music-box active">
        <img src="./image/mic2.png" alt="">
        <audio
        id="musicAudio"
        controls="controls"
        autoplay="autoplay"
        loop="loop"
        >
            <source src="./image/KF016410_Asian_Borders.mp3"/>
        </audio>
    </div>
</div>
</body>
</html>
<script>
    window.onload = function () {
        
        // var isTop = $(window).scrollTop();
        // $(window).scroll(function(e) {
        //     console.log($(window).scrollTop())
        //     isTop = $(window).scrollTop();
        // })


        // 默认加载底部
        var t = document.body.clientHeight;
        setTimeout(function () {
            window.scroll(0, t);
        },10);

        var mo=function(e){e.preventDefault();};
        /***滑动限制***/
        function stop(){
            document.body.style.overflow='hidden';       
            document.addEventListener("touchmove",mo,{passive:false});//禁止页面滑动
        }
        /***取消滑动限制***/
        function move(){
            document.body.style.overflow='';//出现滚动条
            document.removeEventListener("touchmove",mo,{passive:false});       
        }
        // 点击播放视频
        $('.content-box-pics-item-box > i').click(function () {
            stop();
            // $('body').css({
            //     overflow: 'hidden',
            //     position: 'fixed',
            //     top: -$(window).scrollTop(),
            //     left: 0
            // })
            console.log($(this).attr('data-video'))
            $('.video-box').show();
            setvideo($(this).attr('data-video'));
            document.getElementsByTagName('audio')[0].pause();
            $('.music-box').removeClass('active');
            $('.music-box').children('img').attr('src', './image/mic1.png')
        });
        // 点击关闭视频
        $('.video-box').click(function(){
            // $('body').css({
            //     overflow: 'visible',
            //     position: 'static',
            //     top: 'auto',
            //     left: 'auto'
            // })
            // window.scroll(0, $(window).scrollTop());
            move();
            $('.video-box').hide();
            document.getElementById('video').pause()
            document.getElementsByTagName('audio')[0].play();
            $('.music-box').addClass('active')
            $('.music-box').children('img').attr('src', './image/mic2.png')
        });
        function setvideo(url) {
            var youku = $(".video-box");
            var htmlstr = '';
            if(SetSystem() == 'Android') {
                $('.video-box').addClass('active');
                htmlstr ='<video class="active" id="video" width="100%" src="'+url+'" poster="img/lunyu.png" preload="auto" controls="controls"></video>'
            } else {
                $('.video-box').removeClass('active');
                htmlstr ='<video id="video" width="100%" poster="img/lunyu.png" preload="auto" x-webkit-airplay="true" webkit-playsinline="true" playsinline="true" x5-playsinline="" x5-video-player-fullscreen="false" controls="controls">' +
                        '<source src="'+url+'" type="video/mp4" />'
                    '</video>'
            }
            youku.html(htmlstr);
            document.getElementById('video').play();
            // document.getElementById('video').requestFullscreen();
        };

        function SetSystem() {
            var u = navigator.userAgent, app = navigator.appVersion;
            var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //g
            var isIOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
            if (isAndroid) {
                //这个是安卓操作系统
                return 'Android'
            }
            if (isIOS) {
                //这个是ios操作系统
                return 'Ios'
            }
        }

        // 音频播放
        document.getElementsByTagName('audio')[0].play();
        document.addEventListener("WeixinJSBridgeReady", function () {
            document.getElementsByTagName('audio')[0].play();
            document.getElementsByTagName('audio')[0].play();
        }, false);
        let state = true;
        $('.music-box').click(function() {
            if(state) {
                document.getElementsByTagName('audio')[0].pause(); 
                $(this).removeClass('active')
                $(this).children('img').attr('src', './image/mic1.png')
            } else {
                document.getElementsByTagName('audio')[0].play(); 
                $(this).addClass('active')
                $(this).children('img').attr('src', './image/mic2.png')
            }
            state = !state
        })

        //loading
        function fnLoading() {
            var num = 0;
            var IntervalName = setInterval(function () {
                num++;
                if(num >= 100) {
                    num = 100
                }
                $('#loadingNum').html(num + '%');
                if(num == 100) {
                    setTimeout(function () {
                        clearInterval(IntervalName);
                        $('.total-box').css({
                            opacity: 1
                        })
                        $('.loading-box').addClass('active');
                        setTimeout(function () {
                            $('.loading-box').hide();
                        },500)
                    },500)
                }
            })
        }
        // 开屏提示
        setTimeout(function () {
            fnLoading();
        },800)
        $('.row-tishi').click(function () {
            $(this).addClass('active')
            setTimeout(function () {
                $('.row-tishi').hide()
            },100)
        })
    };
    
</script>
